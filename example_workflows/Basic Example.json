{"id":"6eca6770-bff0-4e3e-bef1-037add9aaf60","revision":0,"last_node_id":109,"last_link_id":224,"nodes":[{"id":99,"type":"Sage_LoraStack","pos":[-489.4921875,792.75537109375],"size":[306.21099853515625,130],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":null},{"localized_name":"enabled","name":"enabled","type":"BOOLEAN","widget":{"name":"enabled"},"link":null},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"model_weight","name":"model_weight","type":"FLOAT","widget":{"name":"model_weight"},"link":null},{"localized_name":"clip_weight","name":"clip_weight","type":"FLOAT","widget":{"name":"clip_weight"},"link":null}],"outputs":[{"localized_name":"lora_stack","name":"lora_stack","type":"LORA_STACK","slot_index":0,"links":[195]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_LoraStack"},"widgets_values":[false,"pony/general style/prgfrg23_styles/Anime Cold Night Style SDXL_LoRA_Pony Diffusion V6 XL.safetensors",1,1]},{"id":103,"type":"Sage_TripleLoraStack","pos":[-489.4921875,968.9092407226562],"size":[307.29998779296875,322],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":195},{"localized_name":"enabled_1","name":"enabled_1","type":"BOOLEAN","widget":{"name":"enabled_1"},"link":null},{"localized_name":"lora_1_name","name":"lora_1_name","type":"COMBO","widget":{"name":"lora_1_name"},"link":null},{"localized_name":"model_1_weight","name":"model_1_weight","type":"FLOAT","widget":{"name":"model_1_weight"},"link":null},{"localized_name":"clip_1_weight","name":"clip_1_weight","type":"FLOAT","widget":{"name":"clip_1_weight"},"link":null},{"localized_name":"enabled_2","name":"enabled_2","type":"BOOLEAN","widget":{"name":"enabled_2"},"link":null},{"localized_name":"lora_2_name","name":"lora_2_name","type":"COMBO","widget":{"name":"lora_2_name"},"link":null},{"localized_name":"model_2_weight","name":"model_2_weight","type":"FLOAT","widget":{"name":"model_2_weight"},"link":null},{"localized_name":"clip_2_weight","name":"clip_2_weight","type":"FLOAT","widget":{"name":"clip_2_weight"},"link":null},{"localized_name":"enabled_3","name":"enabled_3","type":"BOOLEAN","widget":{"name":"enabled_3"},"link":null},{"localized_name":"lora_3_name","name":"lora_3_name","type":"COMBO","widget":{"name":"lora_3_name"},"link":null},{"localized_name":"model_3_weight","name":"model_3_weight","type":"FLOAT","widget":{"name":"model_3_weight"},"link":null},{"localized_name":"clip_3_weight","name":"clip_3_weight","type":"FLOAT","widget":{"name":"clip_3_weight"},"link":null}],"outputs":[{"localized_name":"lora_stack","name":"lora_stack","type":"LORA_STACK","slot_index":0,"links":[208]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_TripleLoraStack"},"widgets_values":[true,"pony/util/Pony_QualityV4.0.safetensors",1,1,true,"pony/util/Pony_DetailV2.0.safetensors",1,1,true,"pony/general style/Wholesome-MLP-v1.4b.safetensors",1,1]},{"id":105,"type":"Sage_CheckpointSelector","pos":[-489.4921875,637.8091430664062],"size":[315,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"model_info","name":"model_info","type":"MODEL_INFO","slot_index":0,"links":[207,214]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"44f196bdef827c4e19dd0e934345cb7c4e7fe060","Node name for S&R":"Sage_CheckpointSelector"},"widgets_values":["ponyXL/ponyDiffusionV6XL_v6.safetensors"]},{"id":68,"type":"Sage_SamplerInfo","pos":[120.4799575805664,708.726318359375],"size":[284.984375,178],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null}],"outputs":[{"localized_name":"SAMPLER_INFO","name":"SAMPLER_INFO","type":"SAMPLER_INFO","slot_index":0,"links":[180,218]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SamplerInfo"},"widgets_values":[0,"fixed",20,5.5,"gradient_estimation","kl_optimal"]},{"id":106,"type":"Sage_ModelLoraStackLoader","pos":[-132.1249237060547,641.1101684570312],"size":[210,106],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model_info","name":"model_info","type":"MODEL_INFO","link":207},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":208}],"outputs":[{"localized_name":"model","name":"model","type":"MODEL","slot_index":0,"links":[217]},{"localized_name":"clip","name":"clip","type":"CLIP","slot_index":1,"links":[210]},{"localized_name":"vae","name":"vae","type":"VAE","slot_index":2,"links":[222]},{"localized_name":"lora_stack","name":"lora_stack","type":"LORA_STACK","links":null},{"localized_name":"keywords","name":"keywords","type":"STRING","slot_index":4,"links":[212]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"44f196bdef827c4e19dd0e934345cb7c4e7fe060","Node name for S&R":"Sage_ModelLoraStackLoader"},"widgets_values":[]},{"id":92,"type":"Sage_PonyPrefix","pos":[-132.1249237060547,797.1420288085938],"size":[210,106],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"add_score","name":"add_score","type":"BOOLEAN","widget":{"name":"add_score"},"link":null},{"localized_name":"rating","name":"rating","type":"COMBO","widget":{"name":"rating"},"link":null},{"localized_name":"source","name":"source","type":"COMBO","widget":{"name":"source"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","slot_index":0,"links":[159]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_PonyPrefix"},"widgets_values":[true,"safe","furry"]},{"id":87,"type":"Sage_SetText","pos":[-132.1249237060547,947.3899536132812],"size":[400,200],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"prefix","name":"prefix","shape":7,"type":"STRING","link":159},{"localized_name":"suffix","name":"suffix","shape":7,"type":"STRING","link":212},{"localized_name":"str","name":"str","type":"STRING","widget":{"name":"str"},"link":null}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","slot_index":0,"links":[167]}],"title":"Set Text - Positive","properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SetText"},"widgets_values":["galactic cosmic funk cat floating in space, stars, planets, lasers, colorful, funky, groovy, yellow eyes, fur, furry, fur tufts, volumetric lighting, soft shading"]},{"id":89,"type":"Sage_SetText","pos":[-132.1249237060547,1189.0875244140625],"size":[400,200],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"prefix","name":"prefix","shape":7,"type":"STRING","link":null},{"localized_name":"suffix","name":"suffix","shape":7,"type":"STRING","link":null},{"localized_name":"str","name":"str","type":"STRING","widget":{"name":"str"},"link":null}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","links":[156]}],"title":"Set Text - Negative","properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SetText"},"widgets_values":["signature, watermark"]},{"id":93,"type":"Sage_EmptyLatentImagePassthrough","pos":[292.6694030761719,1145.4931640625],"size":[210,170],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"sd3","name":"sd3","type":"BOOLEAN","widget":{"name":"sd3"},"link":null}],"outputs":[{"localized_name":"latent","name":"latent","type":"LATENT","slot_index":0,"links":[221]},{"localized_name":"width","name":"width","type":"INT","slot_index":1,"links":[178]},{"localized_name":"height","name":"height","type":"INT","slot_index":2,"links":[179]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_EmptyLatentImagePassthrough"},"widgets_values":[1024,1024,1,false]},{"id":33,"type":"Sage_DualCLIPTextEncode","pos":[292.6694030761719,973.7396240234375],"size":[210,118],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":210},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","link":167},{"localized_name":"neg","name":"neg","shape":7,"type":"STRING","link":156},{"localized_name":"clean","name":"clean","type":"BOOLEAN","widget":{"name":"clean"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":0,"links":[219]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":1,"links":[220]},{"localized_name":"pos_text","name":"pos_text","type":"STRING","slot_index":2,"links":[176]},{"localized_name":"neg_text","name":"neg_text","type":"STRING","slot_index":3,"links":[177]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_DualCLIPTextEncode"},"widgets_values":["score_9, score_8_up, scoure_7_up, score_6_up, score_5_up, score_4_up"]},{"id":108,"type":"Sage_AdvSamplerInfo","pos":[541.3628540039062,717.480712890625],"size":[244.6666717529297,130],"flags":{},"order":6,"mode":4,"inputs":[{"localized_name":"add_noise","name":"add_noise","type":"BOOLEAN","widget":{"name":"add_noise"},"link":null},{"localized_name":"start_at_step","name":"start_at_step","type":"INT","widget":{"name":"start_at_step"},"link":null},{"localized_name":"end_at_step","name":"end_at_step","type":"INT","widget":{"name":"end_at_step"},"link":null},{"localized_name":"return_with_leftover_noise","name":"return_with_leftover_noise","type":"BOOLEAN","widget":{"name":"return_with_leftover_noise"},"link":null}],"outputs":[{"localized_name":"ADV_SAMPLER_INFO","name":"ADV_SAMPLER_INFO","type":"ADV_SAMPLER_INFO","links":[223]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"f8be5b313183f2a64deb10120fb21f558709a3c7","Node name for S&R":"Sage_AdvSamplerInfo"},"widgets_values":[true,0,10000,false]},{"id":102,"type":"Note","pos":[-1000.5194702148438,640.6676025390625],"size":[482.5400085449219,469.6729736328125],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["A few things worthy of note:\n\"Construct Metadata\" and \"Construct Metadata Lite\" both build metadata and pass it over to be added to the picture metadata as text, but Lite adds less data, and does so in a format that Civitai seems to think is a site generated picture.\n\nThe extra input is literally for anything extra you want in there, such as your name. The switches are both for things ComfyUI normally adds, letting you not include workflow information if you don't want to.\n\nOn the \"Prompts to CLIP\" node, both \"pos\" and \"neg\" are optional, and if you don't hook them up, the node will zero the corresponding conditioning.\n\nThere's a \"Last Lora Info\" node you can hook to the lora_stack output to get info from civitai on the last lora in the stack, including both the url for that version *and* the latest version. There's a corresponding \"Model Info\" node for models. The lora_stacks are interchangeable with other people's custom nodes.\n\nA cache is kept of models and loras you use. \"Cache Maintenance\" and \"Model Scan & Report\" will let you do things such as adding all your models and loras to the cache (very slow), run reports showing duplicates and sorting by model type, and such.\n\nThe \"Add Pony v6 Prefixes\" node is just a helper node for pony based models, and can be left out otherwise.\n\nYou can hook Sampler Info and Adv Sampler Info to multiple KSamplers (and the latter is optional)!"],"color":"#432","bgcolor":"#653"},{"id":88,"type":"Sage_SetText","pos":[533.1552734375,1421.7530517578125],"size":[250.92800903320312,156],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"prefix","name":"prefix","shape":7,"type":"STRING","link":null},{"localized_name":"suffix","name":"suffix","shape":7,"type":"STRING","link":null},{"localized_name":"str","name":"str","type":"STRING","widget":{"name":"str"},"link":null}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","links":[155]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SetText"},"widgets_values":["*Add any extra text you want in your metadata here*"]},{"id":96,"type":"Sage_ConstructMetadataLite","pos":[533.1552734375,1200.686279296875],"size":[210,170],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"model_info","name":"model_info","type":"MODEL_INFO","link":214},{"localized_name":"sampler_info","name":"sampler_info","type":"SAMPLER_INFO","link":180},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":null},{"localized_name":"positive_string","name":"positive_string","type":"STRING","widget":{"name":"positive_string"},"link":176},{"localized_name":"negative_string","name":"negative_string","type":"STRING","widget":{"name":"negative_string"},"link":177},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":178},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":179}],"outputs":[{"localized_name":"param_metadata","name":"param_metadata","type":"STRING","slot_index":0,"links":[213,216]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_ConstructMetadataLite"},"widgets_values":["","",0,0]},{"id":109,"type":"Sage_KSamplerTiledDecoder","pos":[533.1552734375,919.4097900390625],"size":[210,198],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":217},{"localized_name":"sampler_info","name":"sampler_info","type":"SAMPLER_INFO","link":218},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":219},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":220},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":221},{"localized_name":"vae","name":"vae","type":"VAE","link":222},{"localized_name":"tiling_info","name":"tiling_info","shape":7,"type":"TILING_INFO","link":null},{"localized_name":"advanced_info","name":"advanced_info","shape":7,"type":"ADV_SAMPLER_INFO","link":223},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":null},{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[224]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"0106ca8b94dd44cbc66386f89c80c9d167c2a1c3","Node name for S&R":"Sage_KSamplerTiledDecoder"},"widgets_values":[1]},{"id":107,"type":"Sage_ViewAnything","pos":[815.2846069335938,1477.1087646484375],"size":[402.0999755859375,286.1000061035156],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"any","name":"any","type":"*","link":213}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui_sageutils","ver":"44f196bdef827c4e19dd0e934345cb7c4e7fe060","Node name for S&R":"Sage_ViewAnything"},"widgets_values":[]},{"id":3,"type":"Sage_SaveImageWithMetadata","pos":[815.2846069335938,927.3793334960938],"size":[309.20001220703125,484.5],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":224},{"localized_name":"param_metadata","name":"param_metadata","shape":7,"type":"STRING","link":216},{"localized_name":"extra_metadata","name":"extra_metadata","shape":7,"type":"STRING","link":155},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"include_node_metadata","name":"include_node_metadata","type":"BOOLEAN","widget":{"name":"include_node_metadata"},"link":null},{"localized_name":"include_extra_pnginfo_metadata","name":"include_extra_pnginfo_metadata","type":"BOOLEAN","widget":{"name":"include_extra_pnginfo_metadata"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SaveImageWithMetadata"},"widgets_values":["ComfyUI_Meta","",""]}],"links":[[155,88,0,3,2,"STRING"],[156,89,0,33,2,"STRING"],[159,92,0,87,0,"STRING"],[167,87,0,33,1,"STRING"],[176,33,2,96,3,"STRING"],[177,33,3,96,4,"STRING"],[178,93,1,96,5,"INT"],[179,93,2,96,6,"INT"],[180,68,0,96,1,"SAMPLER_INFO"],[195,99,0,103,0,"LORA_STACK"],[207,105,0,106,0,"MODEL_INFO"],[208,103,0,106,1,"LORA_STACK"],[210,106,1,33,0,"CLIP"],[212,106,4,87,1,"STRING"],[213,96,0,107,0,"*"],[214,105,0,96,0,"MODEL_INFO"],[216,96,0,3,1,"STRING"],[217,106,0,109,0,"MODEL"],[218,68,0,109,1,"SAMPLER_INFO"],[219,33,0,109,2,"CONDITIONING"],[220,33,1,109,3,"CONDITIONING"],[221,93,0,109,4,"LATENT"],[222,106,2,109,5,"VAE"],[223,108,0,109,7,"ADV_SAMPLER_INFO"],[224,109,1,3,0,"IMAGE"]],"groups":[{"id":1,"title":"Loras","bounding":[-499.4921875,719.1553955078125,327.29998779296875,581.7537841796875],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.9090909090909092,"offset":[547.7921999999993,-515.7090999999964]},"frontendVersion":"1.18.9","ue_links":[],"node_versions":{"ComfyUI_SageUtils":"cb8067da3877b9d228e0e2428f7a06559bd28260","comfy-core":"0.3.13"},"VHS_latentpreview":true,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}