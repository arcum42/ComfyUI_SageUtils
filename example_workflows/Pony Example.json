{"id":"6eca6770-bff0-4e3e-bef1-037add9aaf60","revision":0,"last_node_id":115,"last_link_id":251,"nodes":[{"id":105,"type":"Sage_CheckpointSelector","pos":[-619.2909545898438,402.4089050292969],"size":[315,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"model_info","name":"model_info","type":"MODEL_INFO","slot_index":0,"links":[207,243]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"44f196bdef827c4e19dd0e934345cb7c4e7fe060","Node name for S&R":"Sage_CheckpointSelector"},"widgets_values":["ponyXL/ponyDiffusionV6XL_v6.safetensors"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":114,"type":"Sage_ModelShifts","pos":[-613.7926635742188,811.6083984375],"size":[210,202],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"shift_type","name":"shift_type","type":"COMBO","widget":{"name":"shift_type"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"freeu_v2","name":"freeu_v2","type":"BOOLEAN","widget":{"name":"freeu_v2"},"link":null},{"localized_name":"b1","name":"b1","type":"FLOAT","widget":{"name":"b1"},"link":null},{"localized_name":"b2","name":"b2","type":"FLOAT","widget":{"name":"b2"},"link":null},{"localized_name":"s1","name":"s1","type":"FLOAT","widget":{"name":"s1"},"link":null},{"localized_name":"s2","name":"s2","type":"FLOAT","widget":{"name":"s2"},"link":null}],"outputs":[{"localized_name":"model_shifts","name":"model_shifts","type":"MODEL_SHIFTS","links":[239]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"f13cf6ea9eec40bb1fc1ce87861ce47de93c2bde","Node name for S&R":"Sage_ModelShifts"},"widgets_values":["None",3,true,1.3,1.4,0.9,0.2],"color":"#232","bgcolor":"#353"},{"id":113,"type":"Sage_QuickResPicker","pos":[-609.3909301757812,1057.211669921875],"size":[210,126],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"aspect_ratio","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"orientation","name":"orientation","type":"COMBO","widget":{"name":"orientation"},"link":null},{"localized_name":"multiplier","name":"multiplier","type":"FLOAT","widget":{"name":"multiplier"},"link":null}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[237]},{"localized_name":"height","name":"height","type":"INT","links":[238]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"f13cf6ea9eec40bb1fc1ce87861ce47de93c2bde","Node name for S&R":"Sage_QuickResPicker"},"widgets_values":["1:1","Portrait",1],"color":"#223","bgcolor":"#335"},{"id":33,"type":"Sage_DualCLIPTextEncode","pos":[431.26904296875,388.5422668457031],"size":[210,118],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":210},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","link":167},{"localized_name":"neg","name":"neg","shape":7,"type":"STRING","link":156},{"localized_name":"clean","name":"clean","type":"BOOLEAN","widget":{"name":"clean"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":0,"links":[219]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":1,"links":[220]},{"localized_name":"pos_text","name":"pos_text","type":"STRING","slot_index":2,"links":[]},{"localized_name":"neg_text","name":"neg_text","type":"STRING","slot_index":3,"links":[]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_DualCLIPTextEncode"},"widgets_values":["score_9, score_8_up, scoure_7_up, score_6_up, score_5_up, score_4_up"],"color":"#432","bgcolor":"#653"},{"id":109,"type":"Sage_KSamplerTiledDecoder","pos":[665.153564453125,389.2119445800781],"size":[212.70596923828126,410.00006103515625],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":217},{"localized_name":"sampler_info","name":"sampler_info","type":"SAMPLER_INFO","link":248},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":219},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":220},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":241},{"localized_name":"vae","name":"vae","type":"VAE","link":222},{"localized_name":"tiling_info","name":"tiling_info","shape":7,"type":"TILING_INFO","link":null},{"localized_name":"advanced_info","name":"advanced_info","shape":7,"type":"ADV_SAMPLER_INFO","link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"image","name":"image","type":"IMAGE","links":[224]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"0106ca8b94dd44cbc66386f89c80c9d167c2a1c3","Node name for S&R":"Sage_KSamplerTiledDecoder"},"widgets_values":[1],"color":"#323","bgcolor":"#535"},{"id":88,"type":"Sage_SetText","pos":[907.1543579101562,924.5549926757812],"size":[250.92800903320312,156],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"prefix","name":"prefix","shape":7,"type":"STRING","link":null},{"localized_name":"suffix","name":"suffix","shape":7,"type":"STRING","link":null},{"localized_name":"str","name":"str","type":"STRING","widget":{"name":"str"},"link":null}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","links":[155]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SetText"},"widgets_values":["*Add any extra text you want in your metadata here*"],"color":"#323","bgcolor":"#535"},{"id":107,"type":"Sage_ViewAnything","pos":[223.48387145996094,864.4108276367188],"size":[642.9999389648438,319.1000061035156],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"any","name":"any","type":"*","link":235}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui_sageutils","ver":"44f196bdef827c4e19dd0e934345cb7c4e7fe060","Node name for S&R":"Sage_ViewAnything"},"widgets_values":["score_9, score_8_up, score_7_up, score_6_up, score_5_up, score_4_up, source_anime, rating_safe, galactic cosmic cyber woman floating in space, stars, planets, lasers, colorful, retro anime, wave, lighting, soft shading, detailed face, spaceship, gh0st, retro artstyle\nNegative prompt: signature, watermark\nSteps: 30, Sampler: Euler, Scheduler type: beta, CFG scale: 6.0, Seed: 2, Size: 1024x1024"],"color":"#323","bgcolor":"#535"},{"id":106,"type":"Sage_ModelLoraStackLoader","pos":[-276.2252197265625,575.1107788085938],"size":[210,106],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model_info","name":"model_info","type":"MODEL_INFO","link":207},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":250},{"localized_name":"model_shifts","name":"model_shifts","shape":7,"type":"MODEL_SHIFTS","link":239}],"outputs":[{"localized_name":"model","name":"model","type":"MODEL","slot_index":0,"links":[217]},{"localized_name":"clip","name":"clip","type":"CLIP","slot_index":1,"links":[210]},{"localized_name":"vae","name":"vae","type":"VAE","slot_index":2,"links":[222]},{"localized_name":"lora_stack","name":"lora_stack","type":"LORA_STACK","links":[230]},{"localized_name":"keywords","name":"keywords","type":"STRING","slot_index":4,"links":[212]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"44f196bdef827c4e19dd0e934345cb7c4e7fe060","Node name for S&R":"Sage_ModelLoraStackLoader"},"widgets_values":[],"color":"#233","bgcolor":"#355"},{"id":89,"type":"Sage_SetText","pos":[-27.625011444091797,690.7919311523438],"size":[411,123],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"prefix","name":"prefix","shape":7,"type":"STRING","link":null},{"localized_name":"suffix","name":"suffix","shape":7,"type":"STRING","link":null},{"localized_name":"str","name":"str","type":"STRING","widget":{"name":"str"},"link":null}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","links":[156,247]}],"title":"Set Text - Negative","properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SetText"},"widgets_values":["signature, watermark"],"color":"#432","bgcolor":"#653"},{"id":111,"type":"Sage_TripleQuickLoraStack","pos":[-609.3927612304688,500.6112976074219],"size":[299.1000061035156,257.70001220703125],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":null},{"localized_name":"enabled_1","name":"enabled_1","type":"BOOLEAN","widget":{"name":"enabled_1"},"link":null},{"localized_name":"lora_1_name","name":"lora_1_name","type":"COMBO","widget":{"name":"lora_1_name"},"link":null},{"localized_name":"model_1_weight","name":"model_1_weight","type":"FLOAT","widget":{"name":"model_1_weight"},"link":null},{"localized_name":"enabled_2","name":"enabled_2","type":"BOOLEAN","widget":{"name":"enabled_2"},"link":null},{"localized_name":"lora_2_name","name":"lora_2_name","type":"COMBO","widget":{"name":"lora_2_name"},"link":null},{"localized_name":"model_2_weight","name":"model_2_weight","type":"FLOAT","widget":{"name":"model_2_weight"},"link":null},{"localized_name":"enabled_3","name":"enabled_3","type":"BOOLEAN","widget":{"name":"enabled_3"},"link":null},{"localized_name":"lora_3_name","name":"lora_3_name","type":"COMBO","widget":{"name":"lora_3_name"},"link":null},{"localized_name":"model_3_weight","name":"model_3_weight","type":"FLOAT","widget":{"name":"model_3_weight"},"link":null}],"outputs":[{"localized_name":"lora_stack","name":"lora_stack","type":"LORA_STACK","links":[250]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"f13cf6ea9eec40bb1fc1ce87861ce47de93c2bde","Node name for S&R":"Sage_TripleQuickLoraStack"},"widgets_values":[true,"pony/util/Pony_QualityV4.0.safetensors",1,true,"pony/general style/vixons-animemanga-styles/gh0stXLP.safetensors",1,true,"pony/general style/Wholesome-MLP-v1.4b.safetensors",1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":87,"type":"Sage_SetText","pos":[-30.924819946289062,387.4915771484375],"size":[431.8999938964844,252.8000030517578],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"prefix","name":"prefix","shape":7,"type":"STRING","link":251},{"localized_name":"suffix","name":"suffix","shape":7,"type":"STRING","link":212},{"localized_name":"str","name":"str","type":"STRING","widget":{"name":"str"},"link":null}],"outputs":[{"localized_name":"str","name":"str","type":"STRING","slot_index":0,"links":[167,246]}],"title":"Set Text - Positive","properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SetText"},"widgets_values":["galactic cosmic cyber woman floating in space, stars, planets, lasers, colorful, retro anime, wave, lighting, soft shading, detailed face, spaceship, "],"color":"#332922","bgcolor":"#593930"},{"id":68,"type":"Sage_SamplerInfo","pos":[-364.6188049316406,816.5249633789062],"size":[222.2843780517578,178],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null}],"outputs":[{"localized_name":"sampler_info","name":"sampler_info","type":"SAMPLER_INFO","slot_index":0,"links":[248,249]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SamplerInfo"},"widgets_values":[2,"fixed",30,6,"euler","beta"],"color":"#232","bgcolor":"#353"},{"id":3,"type":"Sage_SaveImageWithMetadata","pos":[903.28466796875,378.4792785644531],"size":[309.20001220703125,484.5],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":224},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"include_node_metadata","name":"include_node_metadata","type":"BOOLEAN","widget":{"name":"include_node_metadata"},"link":null},{"localized_name":"include_extra_pnginfo_metadata","name":"include_extra_pnginfo_metadata","type":"BOOLEAN","widget":{"name":"include_extra_pnginfo_metadata"},"link":null},{"localized_name":"save_text","name":"save_text","type":"BOOLEAN","widget":{"name":"save_text"},"link":null},{"localized_name":"param_metadata","name":"param_metadata","type":"STRING","widget":{"name":"param_metadata"},"link":236},{"localized_name":"extra_metadata","name":"extra_metadata","type":"STRING","widget":{"name":"extra_metadata"},"link":155}],"outputs":[],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_SaveImageWithMetadata"},"widgets_values":["ComfyUI_Meta","","","Image Only","",""],"color":"#233","bgcolor":"#355"},{"id":115,"type":"Sage_PonyPrefix","pos":[-270.7253112792969,360.4425354003906],"size":[210,154],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"add_score","name":"add_score","type":"BOOLEAN","widget":{"name":"add_score"},"link":null},{"localized_name":"score_start","name":"score_start","type":"INT","widget":{"name":"score_start"},"link":null},{"localized_name":"score_end","name":"score_end","type":"INT","widget":{"name":"score_end"},"link":null},{"localized_name":"rating","name":"rating","type":"COMBO","widget":{"name":"rating"},"link":null},{"localized_name":"source","name":"source","type":"COMBO","widget":{"name":"source"},"link":null}],"outputs":[{"localized_name":"string","name":"string","type":"STRING","links":[251]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"633f9612654154e23a20fff0f6478a5482f762b4","Node name for S&R":"Sage_PonyPrefix"},"widgets_values":[true,9,4,"safe","anime"],"color":"#322","bgcolor":"#533"},{"id":93,"type":"Sage_EmptyLatentImagePassthrough","pos":[-353.0304870605469,1046.494140625],"size":[257.0940307617187,170],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":237},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":238},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"latent","name":"latent","type":"LATENT","slot_index":0,"links":[241]},{"localized_name":"width","name":"width","type":"INT","slot_index":1,"links":[233]},{"localized_name":"height","name":"height","type":"INT","slot_index":2,"links":[234]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"abe2166c352d72a1c23ccf95b9e9ec9230d01d07","Node name for S&R":"Sage_EmptyLatentImagePassthrough"},"widgets_values":[1024,1024,1,"4_channel"],"color":"#223","bgcolor":"#335"},{"id":102,"type":"Note","pos":[-1123.71923828125,417.36871337890625],"size":[471.60562310337025,525.641851503987],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The \"Construct Metadata (Flexible)\" node builds metadata and pass it over to be added to the picture metadata as text, but Lite adds less data, and does so in a format that Civitai seems to think is a site generated picture. It replaces the other two versions of the node. \n\nNote that sometimes Civitai metadata can be inaccurate, as sometime people do things like putting t5-xxl as a version of a image model.\n\nThe extra input is literally for any extra text you want in there, such as your name. The switches are both for things ComfyUI normally adds, letting you not include workflow information if you don't want to.\n\nOn the \"Prompts to CLIP\" node, both \"pos\" and \"neg\" are optional, and if you don't hook them up, the node will zero the corresponding conditioning. Clean simply tries to clean up the prompt.\n\nThe lora_stacks are interchangeable with other people's custom nodes. Quick only asks for the model weight, whereas Simple also asks for the clip weight.\n\nA cache is kept of models and loras you use. You can access the cache information on the sidebar under the hammer icon.\n\nThe \"Add Pony v6 Prefixes\" node is just a helper node for pony based models, and can be left out otherwise.\n\nYou can hook Sampler Info, Tiling Info, ans Adv Sampler Info to multiple KSamplers (and the latter two are optional)!\n\n\"Model Shifts\" is optional, and lets you both do model shifts and FreeU v2, and there are also versions of it with just one or the other."],"color":"#432","bgcolor":"#653"},{"id":110,"type":"Sage_ConstructMetadataFlexible","pos":[407.0083923339844,617.2119140625],"size":[224.40746154785157,194],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model_info","name":"model_info","type":"MODEL_INFO","link":243},{"localized_name":"sampler_info","name":"sampler_info","type":"SAMPLER_INFO","link":249},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORA_STACK","link":230},{"localized_name":"positive_string","name":"positive_string","type":"STRING","widget":{"name":"positive_string"},"link":246},{"localized_name":"negative_string","name":"negative_string","type":"STRING","widget":{"name":"negative_string"},"link":247},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":233},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":234},{"localized_name":"metadata_style","name":"metadata_style","type":"COMBO","widget":{"name":"metadata_style"},"link":null}],"outputs":[{"localized_name":"param_metadata","name":"param_metadata","type":"STRING","links":[235,236]}],"properties":{"cnr_id":"comfyui_sageutils","ver":"f13cf6ea9eec40bb1fc1ce87861ce47de93c2bde","Node name for S&R":"Sage_ConstructMetadataFlexible"},"widgets_values":["","",0,0,"Simple"],"color":"#232","bgcolor":"#353"}],"links":[[155,88,0,3,6,"STRING"],[156,89,0,33,2,"STRING"],[167,87,0,33,1,"STRING"],[207,105,0,106,0,"MODEL_INFO"],[210,106,1,33,0,"CLIP"],[212,106,4,87,1,"STRING"],[217,106,0,109,0,"MODEL"],[219,33,0,109,2,"CONDITIONING"],[220,33,1,109,3,"CONDITIONING"],[222,106,2,109,5,"VAE"],[224,109,1,3,0,"IMAGE"],[230,106,3,110,2,"LORA_STACK"],[233,93,1,110,5,"INT"],[234,93,2,110,6,"INT"],[235,110,0,107,0,"*"],[236,110,0,3,5,"STRING"],[237,113,0,93,0,"INT"],[238,113,1,93,1,"INT"],[239,114,0,106,2,"MODEL_SHIFTS"],[241,93,0,109,4,"LATENT"],[243,105,0,110,0,"MODEL_INFO"],[246,87,0,110,3,"STRING"],[247,89,0,110,4,"STRING"],[248,68,0,109,1,"SAMPLER_INFO"],[249,68,0,110,1,"SAMPLER_INFO"],[250,111,0,106,1,"LORA_STACK"],[251,115,0,87,0,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":1.2100000000000002,"offset":[1346.3606910293472,-255.2515189291668]},"frontendVersion":"1.18.9","ue_links":[],"node_versions":{"ComfyUI_SageUtils":"cb8067da3877b9d228e0e2428f7a06559bd28260","comfy-core":"0.3.13"},"VHS_latentpreview":true,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"workflowRendererVersion":"LG"},"version":0.4}